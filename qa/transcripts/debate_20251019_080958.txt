Debate Transcript
================================================================================
Date: 2025-10-19 08:09:59
Topic: E003 - EMPLOYEE CONSOLIDATED LEAVE BALANCE
Ability for Employees with Concurrent Employment to view leave balances associated with all
assignments in one screen.
Current State
􀍻 DoE employees, depending on the type of multiple assignment they hold, can view a
consolidated leave balance within the current MyHR Self Service Portal.
􀍻 When an employee holds multiple roles (e.g., teacher, teacher aide, public service operator) with
different agreements and policies, their leave entitlements cannot be combined. Each role is
treated separately, and leave is applied based on the service in each specific position over the
last 12 months. Therefore, if an employee is on concurrent assignments, the leave balances and
entitlements must be managed independently for each role.
􀍻 TSS converts leave balances when employees change their fraction or Full-Time Equivalent (FTE)
percentage. This is important to ensure that leave entitlements are accurately reflected based on
the employee's current working arrangement. For instance, when an employee transitions from
full-time to part-time, their leave balances should be adjusted accordingly to reflect the new FTE
percentage, ensuring that they receive the appropriate leave entitlements based on their current
work fraction.
Future State - Out of The Box
􀍻 Employees holding multiple assignments in EC have certain data portals assigned at a person
level and some specifically at an assignment level.
􀍻 For Time Off, as leave can accrue at different rates, the balance is reflected at an assignment level
meaning no consolidated view exists.
􀍻 Displaying Leave Balances on the Payslip, as opposed to the EC Time Off UI screen is achievable
through standard concurrent employment configuration. Whilst Leave Balances in this case would
not be consolidated / combined, the Pay Advice can present a complete ‘Person’ view of the
employee’s leave balances.
Enhancement Considerations
DoE employees may hold multiple assignments under different awards; within each assignment different
leave entitlements can exist. For a Consolidated Leave Balance solution, the following must be
considered:
Defining a behind the scenes matrix to determine the leave entitlements per assignment. This is crucial in
ensuring the following services are possible:
􀍻 Accurate Leave Projection:
○ Allowing employees to forecast their leave balance to check future holiday balance or
entitlement to Long Service Leave.
○ Automatic transfer of leave balances between assignments
􀁸 Allowing for sufficient quota balance in order for leave to be requested.
􀍻 Optimising User Experience
○ Providing a great user experience for employees so that they fully understand their overall
leave balance across all their assignments.
􀍻 Converting Leave Balances:
Page | 210
○ Convert leave balances when employees change their fraction or Full-Time Equivalent (FTE)
percentage
Providing a Manager and/or an Administrator View:
􀍻 Compliance, Transparency and Risk reduction by:
○ Managers being able to view employee total leave balance, not limited to a single school.
○ Administrators being able to manage leave at a school level
Enhancement Design
Unified Leave Balance – BTP Application
Utilising an SAP Build App extension, an employee’s leave balance can be displayed across all their
assignments.
In this case, the Position Title is displayed to make it easier for the employee to understand the data being
presented within the application:
BTP: Employee Consolidated Leave Balance Specification
For detailed design, refer to the BTP Specification.
Page | 211
E004a - EMPLOYEE CONSOLIDATED LEAVE REQUEST
Ability for Employees with Concurrent Employment to request across all assignments in one screen.
Current State
􀍻 DoE employees, depending on the type of multiple assignment they hold, can create a
consolidated leave request within the current MyHR Self Service Portal.
􀍻 For any current employees holding multiple assignments on different awards, the current solution
does not allow for consolidated leave requests as they require separate logins.
Future State - Out of The Box
􀍻 Employees holding multiple assignments in EC have certain data portals assigned at a person
level and some specifically at an assignment level.
􀍻 For Time Off, as leave can accrue at different rates, the request is reflected at an assignment level
meaning no consolidated request function exists. This means employees need to create a
separate request for each assignment and the Manager needs to approve the requests
separately.
Enhancement Considerations
Each job assignment will have a specific work schedule associated with it; therefore, any consolidated
leave request will need to combine all work schedules across all assignments the employee holds over
the leave request period.
Different assignments may have different eligibility for different leave types; therefore, validation will be
required to ensure the employee is taking the correct leave for the period/assignment requested.
Ensure the leave request is routed to the appropriate approver based on 1Up Manager of the assignment.
One Request, Multiple Approvers
Building on the consolidated leave balance view, creating a single request for multiple assignments adds
complexity for scenarios where the concurrent employment has the same award but routing the request
to different approvers. This is further complicated by recognising any delegations in place.
One Request, Different Leave Entitlements
Additionally, multiple assignments across different awards means most likely leave types (e.g. Recreation
Leave) may not be used against all assignments. The request must validate what leave types are allowed
to be requested for the days appropriate to the assignment-specific work schedule. Similarly, should an
employee edit an already approved leave type, this could lead to further validation errors/messages.
One Request, Multiple Leave Bookings
Employees taking leave across more than one assignment will need to book the leave to the appropriate
job assignment in EC Time Off. This then allows the assignment to be clearly shown in the Leave History
view:
Enhancement Design
Page | 212
The design of a unified leave request will mimic, as much as possible, the standard processing of
Employee Central Time Off. This is essential in order not to preclude any future roadmap to return to the
SuccessFactors standard user interface.
With the onset of more and more Joule use cases, the opportunity to request leave over multiple work
assignments using conversational AI is a distinct possibility and therefore the design of this BTP extension
must offer an easy path back to utilising the standard product.
The design will support the following business scenarios:
􀍻 Unified Leave Request – Employee Self-Service
Utilising an SAP BTP App extension, an employee can make a leave request using their
consolidated balance across all their assignments.
􀍻 On Behalf Of – Manager / Admin Service
Utilising an SAP BTP App extension, an Admin or Manager can make a leave request on behalf of
an employee using their consolidated balance across all their assignments.
􀍻 Workflow – Determination of Approver(s)
Auto creation of workflow requests to multiple approvers (and/or delegates) across all employee
assignments impacted by the leave.
Max Rounds: 80
First Speaker: hugging
================================================================================

================================================================================
Round 1 - MetadataExtract
================================================================================
# SAP SuccessFactors Metadata Extraction Report
## Employee Consolidated Leave Balance & Request Functionality

### Executive Summary
This metadata extraction analyzes the current state and future requirements for consolidated leave management in SAP SuccessFactors Employee Central, focusing on concurrent employment scenarios and the proposed BTP extension solution.

### 1. Core Entity Sets Analysis

#### 1.1 Employee Central Core Entities
- **EmploymentInfo** - Contains assignment-level employment details
- **JobInfo** - Stores job-related information including assignment-specific data
- **PersonalInfo** - Person-level information
- **TimeAccount** - Leave balance management per assignment
- **TimeOff** - Leave request and approval tracking
- **TimeType** - Leave type definitions and configurations

#### 1.2 Foundation Objects (FO) Dependencies
- **FOCompany** - Company-level configurations
- **FODepartment** - Department structures
- **FOJobCode** - Job code definitions
- **FOPayComponent** - Pay component configurations
- **FOPosition** - Position management

#### 1.3 MDF (Metadata Framework) Objects
- **TimeAccountType** - Leave type configurations
- **TimeAccountBalance** - Assignment-specific balance tracking
- **TimeOffRequest** - Request management per assignment
- **TimeOffApproval** - Approval workflow configurations

### 2. Time Off Data Model Metadata

#### 2.1 TimeAccount Entity Structure
```
TimeAccount {
  - userId: string (key)
  - accountType: string (foreign key to TimeAccountType)
  - assignmentId: string (key)
  - currentBalance: decimal
  - entitlement: decimal
  - effectiveStartDate: date
  - effectiveEndDate: date
  - createdBy: string
  - createdOn: datetime
  - lastModifiedBy: string
  - lastModifiedOn: datetime
}
```

#### 2.2 TimeAccountBalance Fields
- **balance** - Current leave balance (decimal)
- **accrualRate** - Assignment-specific accrual rate (decimal)
- **fteAdjustment** - FTE conversion factor (decimal)
- **awardType** - Associated award/collective agreement (string)
- **assignmentType** - Role-specific assignment type (string)

#### 2.3 TimeOffRequest Entity
```
TimeOffRequest {
  - requestId: string (key)
  - userId: string
  - assignmentId: string (key)
  - timeAccountType: string
  - startDate: date
  - endDate: date
  - status: string
  - approverId: string
  - amount: decimal
  - workSchedule: string
}
```

### 3. Concurrent Employment Metadata

#### 3.1 Assignment-Level Metadata
- **AssignmentId** - Unique identifier for each employment assignment
- **AssignmentType** - Teacher, Teacher Aide, Public Service Operator
- **AwardType** - Collective agreement type per assignment
- **FTEPercentage** - Full-time equivalent percentage
- **WorkSchedule** - Assignment-specific work schedule

#### 3.2 Leave Entitlement Dependencies
- **EntitlementMatrix** - Per-assignment leave entitlement rules
- **AccrualLookupTable** - Job information attribute mappings
- **PolicyCompliance** - Award-specific compliance rules
- **FTEConversionRules** - Balance adjustment logic

### 4. Integration Metadata Framework

#### 4.1 OData API Endpoints
- **/odata/v2/TimeAccount** - Time account balance retrieval
- **/odata/v2/TimeOffRequest** - Leave request management
- **/odata/v2/EmploymentInfo** - Assignment information
- **/odata/v2/JobInfo** - Job-related data
- **/odata/v2/TimeAccountType** - Leave type configurations

#### 4.2 Data Normalization Requirements
- **Temporal Data Management** - Effective start/end date preservation
- **Conflict Resolution** - Retroactive change handling
- **Version Control** - Audit trail maintenance
- **Standardized Formats** - Consistent field mappings

### 5. BTP Extension Metadata

#### 5.1 Custom MDF Objects for Consolidation
```
ConsolidatedLeaveBalance {
  - userId: string (key)
  - totalBalance: decimal
  - assignmentBalances: collection
  - fteAdjustedTotal: decimal
  - lastCalculated: datetime
  - calculationMethod: string
}
```

#### 5.2 SAP Build App Metadata
- **Application ID**: EmployeeConsolidatedLeaveBalance
- **UI5 Component**: LeaveBalanceDashboard
- **Backend Service**: TimeAccountConsolidationService
- **Security Role**: LeaveBalanceViewRole

### 6. Field Definitions and Properties

#### 6.1 Critical Fields for Leave Consolidation
- **userId** (String, Required) - Employee identifier
- **assignmentId** (String, Required) - Assignment identifier  
- **timeAccountType** (String, Required) - Leave type identifier
- **currentBalance** (Decimal, Required) - Current balance amount
- **ftePercentage** (Decimal, Required) - FTE conversion factor
- **awardType** (String, Required) - Collective agreement type
- **effectiveDate** (Date, Required) - Balance effective date

#### 6.2 FTE Conversion Fields
- **fteAdjustmentFactor** - Conversion multiplier for part-time employees
- **proRataCalculation** - Proportional leave calculation method
- **balanceConversionDate** - Date of FTE change impact

### 7. Picklist Metadata

#### 7.1 Time Account Type Picklists
- **LEAVE_TYPES**: Annual Leave, Sick Leave, Personal Leave, Long Service Leave
- **AWARD_TYPES**: Teacher Award, Public Service Award, Support Staff Award
- **ASSIGNMENT_TYPES**: Teacher, Teacher Aide, Public Service Operator
- **STATUS_VALUES**: Active, Inactive, Pending, Converted

### 8. Business Rules Metadata

#### 8.1 Leave Balance Calculation Rules
- **AssignmentSeparationRule** - Balances managed independently per assignment
- **FTEConversionRule** - Balance adjustment on FTE changes
- **AwardComplianceRule** - Award-specific entitlement validation
- **AccrualRateRule** - Assignment-specific accrual calculations

#### 8.2 Validation Business Rules
- **ConcurrentAssignmentValidation** - Multi-assignment eligibility check
- **LeaveTypeValidation** - Assignment-appropriate leave type validation
- **ApproverRoutingRule** - Assignment-specific approval routing
- **WorkScheduleValidation** - Schedule-based leave validation

### 9. Security and Permission Metadata

#### 9.1 Role-Based Permissions
- **LeaveBalanceViewRole** - Read access to consolidated balances
- **LeaveRequestCreateRole** - Create leave requests across assignments
- **LeaveApproveRole** - Assignment-specific approval permissions
- **AdminLeaveManageRole** - Administrative leave management

#### 9.2 Field-Level Security
- **TimeAccount.balance** - Restricted to employee and manager
- **TimeAccount.entitlement** - HR and management access only
- **Assignment.ftePercentage** - Payroll and HR access

### 10. Workflow and Approval Metadata

#### 10.1 Time Off Approval Workflows
- **SingleAssignmentWorkflow** - Standard EC approval process
- **MultiAssignmentWorkflow** - Parallel approval for multiple assignments
- **DelegationWorkflow** - Manager delegation handling
- **ComplianceWorkflow** - Award-specific compliance checks

#### 10.2 Workflow Trigger Events
- **TimeOffRequest.created** - Request creation triggers
- **TimeAccount.balance.changed** - Balance change notifications
- **Assignment.fte.changed** - FTE change impact workflows

### 11. Integration Mapping Metadata

#### 11.1 EC to Payroll Integration
- **TimeAccountBalance** → **PayrollLeaveBalance**
- **TimeOffRequest** → **PayrollTimeOff**
- **AssignmentChange** → **PayrollAssignmentUpdate**

#### 11.2 BTP Extension Integration Points
- **OData Service**: TimeAccountConsolidationService
- **API Endpoint**: /sap/opu/odata/sap/SFEC_TIME_ACCOUNT_CONSOLIDATION
- **Integration Type**: Real-time data synchronization

### 12. Metadata Dependencies and Relationships

#### 12.1 Entity Relationships
```
EmploymentInfo (1) ←→ (M) JobInfo (Assignment Level)
JobInfo (M) ←→ (M) TimeAccount (Assignment Level)
TimeAccount (M) ←→ (M) TimeAccountBalance (Assignment Level)
TimeOffRequest (M) ←→ (1) TimeAccountType (Leave Type)
TimeOffRequest (M) ←→ (1) EmploymentInfo (Assignment Context)
```

#### 12.2 Cross-Module Dependencies
- **EC → Time Off**: Assignment-level leave management
- **EC → Payroll**: Balance and request data transmission
- **EC → BTP**: Consolidated view extension
- **Time Off → EC**: Approval and routing integration

### 13. Configuration Metadata

#### 13.1 Time Off Module Configuration
- **AssignmentLevelBalances** = true
- **SeparateEntitlementsPerAssignment** = true
- **FTEScalingEnabled** = true
- **ConcurrentAssignmentSupport** = true

#### 13.2 Custom Configuration Objects
- **LeaveBalanceConsolidationConfig** - BTP extension settings
- **AssignmentSeparationRules** - Multi-assignment processing rules
- **FTEConversionParameters** - Balance adjustment parameters

### 14. Data Quality and Audit Metadata

#### 14.1 Data Quality Rules
- **BalanceConsistencyCheck** - Assignment-level balance validation
- **FTEConversionAudit** - FTE change impact tracking
- **LeaveTypeCompliance** - Award-appropriate leave validation

#### 14.2 Audit Trail Requirements
- **TimeAccountBalanceChange** - Balance modification tracking
- **AssignmentLevelAccess** - Assignment-specific data access logs
- **ConsolidationCalculation** - BTP extension calculation audit

### 15. Metadata Extraction Summary

The metadata analysis reveals that SAP SuccessFactors Employee Central currently manages leave balances at the assignment level due to different awards and policies governing concurrent employment. The proposed BTP extension addresses the need for consolidated views while maintaining assignment-level accuracy and compliance. Key metadata components include assignment-specific TimeAccount entities, FTE conversion factors, award-based entitlement rules, and multi-assignment approval workflows.

The solution requires careful coordination between EC core entities, Time Off module configurations, and custom BTP extension objects to provide both consolidated views for employees and assignment-level accuracy for compliance purposes.

================================================================================
Debate Summary
================================================================================
Stop Reason: user_stop
Total Rounds: 1
Total Characters: 9829
