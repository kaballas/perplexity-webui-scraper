# SAP SuccessFactors Metadata Extraction Report: Teacher Transfer Points System - Enhanced Data Model

## Executive Summary
This enhanced metadata extraction addresses the complex requirements identified in the debate, incorporating additional data structures, validation mechanisms, and integration patterns to support the Queensland Department of Education's teacher transfer points system with improved historical continuity and business logic handling.

## Enhanced Foundation Objects

### FOTransferLocation (Enhanced Location Management)
```
Object Name: FOTransferLocation
Description: Location-specific transfer rating configuration with historical tracking
Key Fields:
- locationId (string, required, unique)
- locationCode (string, required, indexed)
- locationName (string, required)
- transferRatingLevel (integer, range: 1-7)
- ratingEffectiveDate (date, required)
- ratingEndDate (date, optional)
- locationType (picklist: School, RegionalOffice, CentralOffice)
- schoolType (picklist: Primary, Secondary, Special, Combined)
- geographicClassification (picklist: Metropolitan, Regional, Rural, Remote)
- acceleratedAccrualThreshold (integer, years, default: 0)
- historicalRatingId (string, reference to previous rating record)

Relationships:
- Parent: FOCompany (for organizational hierarchy)
- Children: TransferPointAccrual (daily location-based accruals)
- History: TransferLocationHistory (rating changes over time)

Validation Rules:
- RatingEndDate must be >= RatingEffectiveDate
- No overlapping effective dates for same location
- Geographic classification required for rating levels >4
```

### FOTransferCampaign (Workflow Management)
```
Object Name: FOTransferCampaign
Description: Campaign-specific transfer process management
Key Fields:
- campaignId (string, required, unique)
- campaignName (string, required)
- applicationOpenDate (date, required)
- applicationCloseDate (date, required)
- reviewStartDate (date, required)
- decisionDate (date, required)
- campaignStatus (picklist: Planning, Open, Closed, Complete)
- campaignYear (integer, required)
- minimumServiceRequirement (integer, years)
- transferWindowType (picklist: Annual, Rolling, Hybrid)

Relationships:
- Applications: TransferApplication (campaign-specific applications)
- Locations: FOTransferLocation (campaign-restricted locations)
- Users: User (campaign administrators)
```

## Enhanced MDF Objects for Complex Calculations

### TransferPointAccrual (Enhanced Daily Tracking)
```
Object Name: TransferPointAccrual
Description: Enhanced daily transfer point accrual with service type validation
Key Fields:
- accrualId (string, required, unique)
- employeeId (string, required, indexed)
- accrualDate (date, required, indexed)
- dailyPointsAccrued (decimal, 2 decimal places, required)
- transferRatingAtTime (integer, range: 1-7)
- locationId (string, required, foreign key)
- serviceType (picklist: FullTime, PartTime, Temporary, Contract, LeaveWithoutPay, WorkersCompensation)
- fteProportion (decimal, 3 decimal places, 0.000-1.000)
- workdaysInYear (integer, default: 200)
- isAcceleratedAccrual (boolean, default: false)
- acceleratedYearCount (integer, 0-10)
- serviceBreakFlag (boolean, default: false)
- dataSource (picklist: SuccessFactors, HRResourceGroup, ManualAdjustment)
- calculationMethod (picklist: Standard, Proportional, Accelerated, Reset)
- validationStatus (picklist: Validated, Pending, Disputed, Estimated)

Relationships:
- Employee: User (employee reference)
- Location: FOTransferLocation (location reference)
- Calculation: TransferPointCalculationHistory (calculation reference)

Indexes:
- employeeId + accrualDate (composite for date range queries)
- locationId + accrualDate (for location-based reporting)
- accrualDate (for time-based partitioning)
```

### TransferPointCalculationHistory (Enhanced Audit Trail)
```
Object Name: TransferPointCalculationHistory
Description: Comprehensive calculation audit with policy version tracking
Key Fields:
- calculationId (string, required, unique)
- employeeId (string, required, indexed)
- calculationDate (datetime, required)
- calculationType (picklist: Daily, Monthly, Annual, Adjustment, Migration)
- policyVersion (string, required)
- totalPointsBefore (decimal, required)
- totalPointsAfter (decimal, required)
- pointsAdded (decimal, required)
- pointsDeducted (decimal, required)
- calculationMethod (picklist: Standard, Accelerated, Reset, Legacy, Manual)
- calculationTrigger (picklist: EmploymentChange, LocationChange, Manual, System)
- calculationStatus (picklist: Successful, Warning, Error, Reversed)
- systemUserId (string, required)
- calculationNotes (text, optional)
- validationChecksum (string, system-generated)
- reconciliationRequired (boolean, default: false)

Relationships:
- Employee: User (employee reference)
- TriggeringRecord: any (dynamic reference to triggering record)
- AdjustmentReason: picklist reference (for manual adjustments)
```

## Enhanced OData API Entity Sets

### Advanced Transfer-Specific Entities
```
Entity Set: TransferApplication
Path: /odata/v2/TransferApplication
Key Fields:
- applicationId (string, required, unique)
- userId (string, required, indexed)
- applicationDate (date, required)
- campaignId (string, required, foreign key)
- transferType (picklist: Teacher, TeacherAide, Both)
- applicationStatus (picklist: Draft, Submitted, UnderReview, Approved, Rejected, Withdrawn, Completed, RolledOver)
- transferPointsAtApplication (decimal)
- minimumServiceMet (boolean)
- eligibilityStatus (picklist: Eligible, Pending, Ineligible)
- reasonForTransfer (picklist: Personal, Professional, Hardship, Family, CareerDevelopment)
- familyDependentsCount (integer, default: 0)
- specialConsiderationFlag (boolean)
- applicationYear (integer, required)
- lastUpdated (datetime, required)
- lastUpdatedBy (string, required)

Navigation Properties:
- TransferPreferences: TransferPreference (1:M)
- SupportingDocuments: Document (1:M)
- ApplicationHistory: TransferApplicationHistory (1:M)
```

### TransferApplicationHistory (Audit Trail)
```
Entity Set: TransferApplicationHistory
Path: /odata/v2/TransferApplicationHistory
Key Fields:
- historyId (string, required, unique)
- applicationId (string, required, indexed)
- changeDate (datetime, required)
- changedBy (string, required)
- previousStatus (string)
- newStatus (string)
- changeReason (text)
- actionType (picklist: StatusChange, PreferenceUpdate, DocumentAdded, Withdrawal, Approval)
- notificationSent (boolean, default: false)

Relationships:
- Application: TransferApplication (parent reference)
- User: User (change author)
```

## Enhanced Picklist Metadata

### Comprehensive Transfer Rating Levels
```
Picklist ID: transferRatingLevel
Values:
- 1: Standard Location (Default)
- 2: High Priority Location
- 3: Accelerated Accrual Location (Years 1-3 of service)
- 4: Accelerated Accrual Location (Years 4-6 of service)
- 5: Accelerated Accrual Location (Years 7+ of service)
- 6: Rural/Remote Priority Location
- 7: Critical Need Location
- 8: Special Circumstances Location (system override)

Validation Rules:
- Values 3-5 require acceleratedYearCount tracking
- Values 6-7 trigger special consideration flags
- Value 8 requires manual approval workflow
```

### Service Type with Proportional Accrual
```
Picklist ID: serviceType
Values:
- FullTime: Full-time continuous service (1.0 multiplier)
- PartTime: Part-time service (proportional to FTE)
- Temporary: Temporary engagement (full accrual if <60 days break)
- Contract: Fixed-term contract (full accrual during term)
- LeaveWithoutPay: Unpaid leave (no accrual if >30 days in 12-month period)
- WorkersCompensation: Workers' compensation leave (full accrual first 3 months)
- ParentalLeave: Parental leave (no accrual, service break)
- StudyLeave: Study leave (no accrual, service break)
- ProfessionalDevelopment: Professional development (full accrual)

Business Rules:
- PartTime accrual = DailyRate × FTEProportion
- LeaveWithoutPay triggers service break calculation
- Temporary service extends if break <60 school days
```

## Enhanced Business Rules Metadata

### Advanced Transfer Eligibility Rules
```
Rule Name: ComprehensiveTransferEligibilityCheck
Trigger: Pre-save on TransferApplication
Conditions:
- Service requirement: minimum 2 years continuous service
- Employment status: active employment (not terminated)
- Previous transfer: minimum 12 months since last transfer
- Current position: not in probationary period
- Performance: no active performance issues in last 2 years
- Contract: permanent or long-term contract (>=12 months remaining)

Actions:
- Set eligibilityFlag (true/false)
- Populate eligibilityReason (text)
- Set minimumServiceMet (boolean)
- Generate error messages for failed conditions
- Trigger manager notification if manager approval required
```

### Dynamic Transfer Point Calculation
```
Rule Name: DynamicTransferPointCalculation
Trigger: Post-save on EmploymentInfo/JobInfo changes
Conditions:
- Location change
- Employment start/end
- Service type change
- FTE change >5%

Actions:
- Recalculate transfer points from change date
- Update TransferPointAccrual records
- Update TransferPointCalculationHistory
- Send notification to employee if >10 point change
- Flag for manual review if calculation variance >5%
```

## Enhanced Integration Metadata

### HR Resource Group Integration Specifications
```
Integration Type: SAP Integration Suite - Real-time and Batch
Source: HR Resource Group (legacy system)
Target: SuccessFactors Employee Central
Frequency:
- Real-time: Employment changes, location changes
- Batch: Daily (11:00 PM)
- Full refresh: Annual (July 1st)

Data Objects with Validation:
- HistoricalTransferPoints: 10-year history with gap detection
- PreviousEmploymentRecords: Pre-SuccessFactors service with overlap validation
- TransferRatingHistory: Historical location ratings with consistency checks
- ServiceBreakRecords: Leave and break history with 30-day rolling calculations

Transformation Rules:
- LegacyDateRange: Convert legacy date formats to SuccessFactors standard
- ServiceGapAnalysis: Identify and flag service breaks >30 days
- RatingConsistency: Validate location rating changes over time
- FTEConversion: Convert legacy FTE to decimal format (0.000-1.000)
```

### Data Quality and Validation Integration
```
Validation Integration: Data Quality Service
- Source: SuccessFactors + HR Resource Group
- Target: Validation results table
- Frequency: Real-time validation on save
- Rules: 
  * 10-year history completeness check
  * Service break gap analysis
  * Transfer point calculation verification
  * Location rating consistency validation

Output: ValidationStatus field in TransferPointCalculationHistory
```

## Enhanced Reporting Metadata

### Comprehensive Transfer Points Summary Report
```
Report Name: ComprehensiveTeacherTransferPointsSummary
Entity Dependencies:
- TransferPointAccrual (aggregated daily records)
- EmploymentInfo (service history)
- FOTransferLocation (location ratings)
- TransferPointCalculationHistory (calculation audit)
- User (employee information)

Parameters:
- EmployeeId (required)
- DateRangeStart (required)
- DateRangeEnd (required)
- IncludeHistorical (boolean, default: true)
- OrganizationUnit (optional, for filtering)
- ServiceTypeFilter (optional, picklist)

Output Fields:
- EmployeeName, EmployeeId
- TotalTransferPoints, PointsBreakdownByType
- ServiceYearsInLast10Years, ServiceBreaks
- LocationHistoryWithRatings, RatingChangeDates
- AnnualAccrualSummary, MonthlyBreakdown
- AcceleratedAccrualDetails, ServiceTypeAnalysis
- CalculationMethodBreakdown, ValidationStatus
- GapAnalysis, DataQualityIndicators
```

### Advanced Transfer Points Detail Report
```
Report Name: AdvancedTeacherTransferPointsDetail
Entity Dependencies:
- TransferPointAccrual (detailed daily records)
- TransferPointCalculationHistory (calculation audit)
- JobInfo (location history)
- FOTransferLocation (rating details)
- TransferCampaign (campaign context)

Parameters:
- EmployeeId (required)
- CalculationDate (required)
- DetailLevel (picklist: Daily, Monthly, Annual)
- IncludeHistorical (boolean)

Output Fields:
- DailyAccrualDetails (date, points, rating, location)
- TransferRatingHistory (rating changes over time)
- AcceleratedAccrualDetails (year counts, thresholds)
- PointsAdded/Deducted Breakdown (by calculation type)
- ServiceTypeBreakdown (FTE, type, daily rates)
- ServiceBreakAnalysis (break dates, durations)
- CalculationMethodAnalysis (method, policy version)
- DataQualityIndicators (validation status, source)
```

## Enhanced Security and Permissions Metadata

### Advanced Role-Based Permissions (RBP)
```
Role: TransferApplicationUser
Access: ESS Transfer Application
Permissions: Submit applications, view own applications, update preferences, view own points summary

Role: RegionalHRConsultant
Access: Transfer application review, regional reporting
Permissions: View talent pool (regional), run reports, update status, view detailed points, manage campaigns

Role: Principal
Access: School-specific talent pool
Permissions: View applicants for school, preference marking, view school-specific reports

Role: InternalRecruitment
Access: Full system access
Permissions: All transfer functions, bulk operations, campaign management, system configuration

Role: ComplianceOfficer
Access: Audit and compliance functions
Permissions: View all audit trails, run compliance reports, validate calculations, manage data quality

Role: SystemAdministrator
Access: System configuration and maintenance
Permissions: Manage picklists, business rules, integrations, user access, system configuration
```

## Enhanced Workflow Metadata

### Comprehensive Transfer Application Workflow
```
Workflow Name: ComprehensiveTransferApplicationWorkflow
Start: Employee submits transfer application
Steps:
1. Application Validation (System) - Validate eligibility, data completeness
2. Manager Notification (Optional) - For current location managers
3. Initial Review (Regional/HR) - Verify eligibility, check conflicts
4. Campaign Assignment (System) - Assign to appropriate campaign
5. Principal Review (School-based) - For school-specific preferences
6. Decision Processing (HR/Regional) - Final decision making
7. Status Update and Notification - Update status, notify stakeholders
8. Post-Decision Processing - Update employment records, transfer points

Triggers: Status changes, approval actions, campaign deadlines
Notifications: Email to stakeholders at each step with configurable templates
Escalations: Automatic escalation after configurable time periods
```

## Enhanced Custom Field Definitions

### Employee Central Enhanced Custom Fields
```
Field: transferPointsBalance (MDF field on Employee Info)
- Type: Number (decimal, 2 places)
- Description: Current transfer point balance
- Visibility: HR only
- Calculation: Sum of TransferPointAccrual records for last 10 years

Field: transferEligibleFlag (MDF field on Employee Info)
- Type: Boolean
- Description: Eligibility status for transfers
- Default: false
- Calculation: Based on eligibility business rules

Field: lastTransferDate (MDF field on Employee Info)
- Type: Date
- Description: Date of last approved transfer
- Used for: Minimum service calculations

Field: specialConsiderationFlag (MDF field on Employee Info)
- Type: Boolean
- Description: Flag for special consideration cases
- Used for: Rural service priority, hardship cases

Field: fteProportionCurrent (MDF field on Employee Info)
- Type: Number (decimal, 3 places)
- Description: Current FTE proportion for accrual calculations
- Used for: Part-time service calculations
```

## Enhanced Data Model Relationships

### Comprehensive Entity Associations
```
User → TransferApplication (1:M)
TransferApplication → TransferPreference (1:M)
TransferApplication → TransferApplicationHistory (1:M)
TransferApplication → SupportingDocument (1:M)

User → TransferPointAccrual (1:M)
TransferPointAccrual → FOTransferLocation (M:1)
User → TransferPointCalculationHistory (1:M)
TransferPointCalculationHistory → TransferPointAccrual (M:1) [calculation reference]

User → EmploymentInfo (1:M)
EmploymentInfo → JobInfo (1:M)
JobInfo → FOTransferLocation (M:1) [for location]
FOTransferLocation → TransferLocationHistory (1:M) [rating history]

TransferApplication → FOTransferCampaign (M:1)
FOTransferCampaign → TransferApplication (1:M)
FOTransferCampaign → FOTransferLocation (M:M) [campaign-restricted locations]
```

## Enhanced Data Quality and Validation Metadata

### Comprehensive Validation Rules
```
Validation: TransferPointCalculationIntegrity
- Requirement: Daily accruals must sum to balance within 0.01 tolerance
- Frequency: Daily validation
- Action: Flag discrepancies for review, trigger reconciliation workflow
- Severity: High (blocks reporting until resolved)

Validation: 10-YearHistoryCompleteness
- Requirement: No gaps >30 days in 10-year service history
- Source: Cross-reference SuccessFactors + HR Resource Group
- Action: Identify missing periods, flag for data collection
- Severity: Medium (reporting continues with gaps noted)

Validation: ServiceBreakAnalysis
- Requirement: Service breaks >30 days in 12-month period trigger break flag
- Logic: 30-day rolling window calculation
- Action: Set serviceBreakFlag in TransferPointAccrual
- Severity: Low (informational, affects accrual)

Validation: TransferRatingConsistency
- Requirement: No overlapping effective dates for same location
- Logic: Date range validation
- Action: Prevent save, show error message
- Severity: High (blocks save until resolved)
```

## Data Archiving and Performance Metadata

### Historical Data Management
```
Archive Strategy: Time-based partitioning
- Active Data: Last 10 years in main tables
- Archive Data: 10+ years in historical archive
- Aggregation: Daily records >18 months old aggregated to monthly
- Retention: 7 years for audit, 10 years for transfer policy compliance

Performance Optimization:
- Partitioning: By employee ID ranges and date ranges
- Indexing: Composite indexes on frequently queried fields
- Caching: Transfer point balances cached with 1-hour refresh
- Query Limits: Date range restrictions to prevent system overload
```

This enhanced metadata extraction provides the comprehensive data architecture foundation for implementing the Queensland Department of Education's teacher transfer points system with improved historical continuity, complex business logic handling, and robust validation mechanisms to ensure regulatory compliance and operational efficiency.