# SAP SuccessFactors Metadata Extraction Report
## Teacher & Teacher Aide Vacation Payment Enhancement

### Executive Summary
This metadata extraction analyzes the Teacher and Teacher Aide Vacation Payment enhancement requirements for Queensland Department of Education's HCMS Programme, focusing on the BTP extension for complex vacation payment calculations.

---

## 1. MDF Object Definitions

### 1.1 Summer Vacation MDF Object
**Object Name:** `SummerVacationPayment`
**Purpose:** Store summer vacation payment calculations and eligibility data
**Key Fields:**
- `employeeId` (String) - Personnel Number
- `assignmentId` (String) - Work Assignment Identifier  
- `effectiveStartDate` (Date) - School Year Start
- `effectiveEndDate` (Date) - School Year End
- `paymentType` (Picklist) - Prorata/LSSP/LSOT
- `paymentDate` (Date) - Derived Payment Date
- `paymentHours` (Decimal) - School Hours
- `schoolType` (Picklist) - 6/7 Week School Indicator
- `employmentType` (Picklist) - Perm/FT/Casual
- `calculationTimestamp` (DateTime) - Last Calculation Time

### 1.2 Teacher Vacation Payment Configuration
**Object Name:** `TeacherVacationConfig`
**Purpose:** Configuration parameters for vacation payment rules
**Key Fields:**
- `minServiceDays` (Integer) - Minimum service days for eligibility
- `term4ServiceRequirement` (Integer) - Term 4 service requirement
- `lwpThresholdDays` (Integer) - LWOP threshold (30 school days)
- `fteAverageCalculation` (Boolean) - Enable FTE averaging
- `resignationHandling` (String) - LSOT/LSSP logic

---

## 2. Foundation Object Relationships

### 2.1 Employee Central Integration Points
```
Employee → Employment Information → Assignment → Pay Scale
Employee → Job Information → Employment Type
Employee → Personal Information → FTE Percentage
```

### 2.2 Leave and Absence Dependencies
```
Leave Balance → Annual Leave Accrual
Leave Types → LWOP/Sick Leave/Workers Comp
Time Off Records → Vacation Period Eligibility
```

---

## 3. Picklist Metadata

### 3.1 Payment Type Picklist (`paymentType`)
**Object:** `SummerVacationPayment`
**Values:**
- `PRORATA` - Prorata Summer Vacation Payment
- `LSSP` - Lump Sum Summer Payment
- `LSOT` - Lump Sum On Termination
- `LUMP_PRORATA` - Lump Sum Prorata (Deprecated)

### 3.2 Employment Type Picklist (`employmentType`)
**Object:** `SummerVacationPayment`
**Values:**
- `PERM` - Permanent Teacher
- `FIXED_TERM` - Fixed Term Teacher
- `CASUAL` - Casual Teacher

### 3.3 School Type Picklist (`schoolType`)
**Object:** `SummerVacationPayment`
**Values:**
- `6_WEEK` - 6 Week School
- `7_WEEK` - 7 Week School

---

## 4. Custom Field Definitions

### 4.1 Vacation Payment Fields in Employee Central
```
Field: vacationPaymentEligible (Boolean)
  - UI Label: "Vacation Payment Eligible"
  - Help Text: "Indicates vacation payment eligibility status"
  - Visibility: Read-only

Field: summerVacationHours (Decimal)
  - UI Label: "Summer Vacation Hours"
  - Precision: 2 decimal places
  - Range: 0.00 - 999.99

Field: averageFTEPercentage (Decimal)
  - UI Label: "Average FTE Percentage"
  - Precision: 4 decimal places
  - Range: 0.0000 - 1.0000
```

---

## 5. Payroll Integration Metadata

### 5.1 Custom Payroll Operations
**Operation ID:** `Z_VACATION_PAYMENT`
**Description:** Calculate and process teacher vacation payments
**Processing Type:** Periodic/Retrospective
**Integration Points:**
- EC → ECP Data Transfer
- Custom Table → Payroll Results
- Termination Processing Hook

### 5.2 Custom ECP Tables
```
Table: ZHR_VACATION_CALC
  - Fields: Personnel Number, Assignment, School Year, Payment Type, Hours, Rate
  - Purpose: Store calculation results for performance optimization
  - Index: Personnel Number + School Year + Assignment

Table: ZHR_VACATION_ELIGIBILITY
  - Fields: Personnel Number, Service Days, FTE Average, Leave Exclusions
  - Purpose: Store eligibility determination data
  - Index: Personnel Number + School Year
```

---

## 6. Business Rule Metadata

### 6.1 Summer Vacation Eligibility Rules
**Rule Name:** `SummerVacationEligibilityCheck`
**Type:** SuccessFactors Business Rule
**Trigger:** On-demand calculation
**Logic:**
```
IF employmentType = 'PERM' AND serviceDays >= 100 THEN
  IF term4Service >= requiredDays AND lwpDays <= 30 THEN
    paymentType = 'LSSP'
  ELSE
    paymentType = 'PRORATA'
  END IF
END IF
```

### 6.2 FTE Averaging Calculation Rule
**Rule Name:** `FTEAverageCalculation`
**Type:** BTP Extension
**Purpose:** Calculate average FTE for school year
**Input:** Daily FTE percentages, service days
**Output:** Average FTE percentage

---

## 7. Self-Service Portlet Metadata

### 7.1 Summer Vacation Preview Portlet
**Component:** `SummerVacationPreviewPortlet`
**Location:** Employee Home Page
**Available From:** October onwards
**Data Source:** `SummerVacationPayment` MDF Object
**Features:**
- Projected vacation hours display
- Payment type preview
- Eligibility status indicator

---

## 8. Integration Mapping Metadata

### 8.1 EC to ECP Data Mapping
```
Source: Employee Information System
Target: Employee Central Payroll
Mapping:
  Employee Number → Personnel Number
  Employment Type → Assignment Category
  FTE Percentage → Working Time Percentage
  Service Dates → Employment Duration
```

### 8.2 BTP Extension Points
**Extension Name:** `Z_TEACHER_VACATION_BTP`
**Layer:** Business Technology Platform
**Components:**
- Vacation Payment Calculation Service
- Eligibility Determination Engine
- Data Validation Framework

---

## 9. Security and Authorization Metadata

### 9.1 Role-Based Access Control
```
Role: Vacation Payment Administrator
  - Permissions: Read/Write SummerVacationPayment MDF
  - Scope: All employees in assigned regions

Role: Vacation Payment Viewer
  - Permissions: Read SummerVacationPayment MDF
  - Scope: Self-service only

Role: Payroll Processor
  - Permissions: Execute Z_VACATION_PAYMENT operation
  - Scope: Payroll processing functions
```

---

## 10. Workflow Metadata

### 10.1 Vacation Payment Workflow
**Workflow ID:** `WF_VACATION_PAYMENT_CALC`
**Trigger:** Payroll period start
**Steps:**
1. Eligibility Check
2. Data Validation
3. Payment Calculation
4. Result Storage
5. Notification Generation

---

## 11. Data Model Dependencies

### 11.1 Master Data Framework Dependencies
- `Employee` (Foundation Object)
- `JobInfo` (Foundation Object)  
- `EmploymentInfo` (Foundation Object)
- `TimeAccountDetails` (Foundation Object)
- `SummerVacationPayment` (Custom MDF)
- `TeacherVacationConfig` (Custom MDF)

### 11.2 Foundation Object Dependencies
- `CountrySpecificEntity` (for Australia-specific rules)
- `TimeType` (for leave type configurations)
- `PayScaleClassification` (for pay point calculations)

---

## 12. Configuration Artifacts

### 12.1 Required Configuration Workbooks
- Configuration Workbook – Payroll (Vacation Payment Section)
- BTP Specification Document
- Integration Spec – EC to ECP
- MDF Object Design – Summer Vacation

### 12.2 System Requirements
- SAP SuccessFactors Employee Central
- Employee Central Payroll
- Business Technology Platform (BTP)
- OData API Access
- Custom MDF Object Support

---

## 13. Metadata Quality Assessment

### 13.1 Coverage Analysis
- **High Confidence:** Employee data structures, basic payroll integration
- **Medium Confidence:** Complex eligibility rules, FTE calculations
- **Evidence Gaps:** Youth Detention Centre exceptions, multi-assignment FTE calculations

### 13.2 Integration Dependencies
- **Critical:** EC to ECP integration, BTP extension
- **High:** Time Off management, Leave balance systems
- **Medium:** Organizational management, Pay scale configurations

---

## 14. Recommendations

1. **Enhance MDF Object Validation:** Add comprehensive validation rules for vacation payment calculations
2. **Implement Audit Trail:** Track all vacation payment calculations and modifications
3. **Performance Optimization:** Utilize custom ECP tables for calculation caching
4. **Data Quality Monitoring:** Implement data validation checks for service days and FTE calculations
5. **Exception Handling:** Develop specific handling for Youth Detention Centre scenarios

---

**Report Generated:** Metadata extraction completed based on provided documentation
**Last Updated:** Current analysis date
**Version:** 1.0 - Initial extraction for Teacher Vacation Payment enhancement